## Асинхронным программированием с использованием колбэков

[lern](https://learn.javascript.ru/callbacks)

В функции, которые выполняют какие-либо асинхронные операции, передаётся аргумент `callback` — функция, которая будет вызвана по завершению асинхронного действия.



Браузер позволяет отслеживать загрузку сторонних ресурсов: скриптов, фреймов, изображений и др.

Для этого существуют два события:

- `load` – успешная загрузка,
- `error` – во время загрузки произошла ошибка.

События срабатывают для любых ресурсов, у которых есть внешний `src`.



Загрузка стороннего скрипта и вызов функции, которая объявлена в этом скрипте:

```javascript
function loadScript(src, callback) {
  let script = document.createElement('script');
  script.src = src;
  script.onload = () => callback(script);
  document.head.append(script);
}

loadScript('https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.2.0/lodash.js', script => {
  alert(`Здорово, скрипт ${script.src} загрузился`);
  alert( _ ); // функция, объявленная в загруженном скрипте
});
```

К функциям стороннего скрипта можно обращаться только после того, как скрипт был полностью загружен и выполнен.



### Колбэк в колбэке

Колбэки можно вкладывать в друг друга:

```javascript
loadScript('/my/script.js', function(script) {
  loadScript('/my/script2.js', function(script) {
    loadScript('/my/script3.js', function(script) {
      // ...и так далее, пока все скрипты не будут загружены
    });
  })
});
```

Чем больше вложенных вызовов, тем наш код будет иметь всё большую вложенность, которую сложно поддерживать.

Иногда это называют «адом колбэков» или «адской пирамидой колбэков».
