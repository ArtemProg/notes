## Ключевые слова ref и out



### Ключевое слово ref

Позволяет передавать значимые типы по ссылке (переменная должна быть проинициализирована):

```c#
int myValue = 3;
Foo(ref myValue);
Console.WriteLine(myValue); // Выведет значение: 4
//...
void Foo(ref int value)
{
    value++;
}
```

Позволяет передавать ссылку на массив по ссылке:

```c#
int[] myArray = {1, 2, 3, 4};
Foo(ref myArray); // Массив содержит: 7, 2, 9, 1, 4, 1
//...
void Foo(ref int[] arr)
{
    arr = {7, 2, 9, 1, 4, 1};
}
```



Так же начиная с C# 8 для массивов возможно: Ссылочная локальная переменная, Возвращаемые ссылочные значения.



Присвоение значения определенной переменной используя тернарный оператор:

```c#
int min = 0, max = 0, value = 0;
...
(min > value ? ref max, ref min) = value;
```



### Ключевое слово out

Если мы используем модификатор `out` то параметру в обязательном порядке должно быть присвоено значение внутри метода.

Предварительно инициализировать переменную с модификатором `out` не нужно, а (начиная с C# 6) объявить можно в строке вызова.  В остальном out похож на `ref`.

```c#
Bar(out int myValue);
Console.WriteLine(myValue); // Выведет значение: 4
//...
void Bar(out int value)
{
    value = 5;
}
```

Пример использования в стандартной библиотеки:

```c#
string str = Console.ReadLine();
int.TryParse(str, out int result);
Console.WriteLine(result);
```



### Ключевое слово in

Доступно начиная с C# 7.2

Позволяет передать параметр по ссылке, но изменить значение параметра мы не можем, т.е. параметр доступен только для чтения. Указывать модификатор `in` при вызове не обязательно.

```c#
int myValue = 3;
Foo(myValue);
//...
void Foo(in int value)
{
    Console.WriteLine(value);
}
```

Имеет смысл использовать для структур `struct`.