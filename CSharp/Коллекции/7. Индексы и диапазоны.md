## Индексы и диапазоны

Нововведение, появилось в C# 8.



### Индекс

Обращение к элементу по индексу:

```c#
int[] arr = {2, 5, 7, 10, 8}; // Инициализация массива на 5 элементов.
int el1 = arr[3];  // Вернет: 10. Обращение к 4 элементу массива.
int el2 = arr[^2]; // Вернет: 10. Обращение ко 2 элементу массива с конца.
int el3 = arr[^1]; // Вернет:  8. Обращение к последнему элементу массива.
```

Программное создание индекса:

```c#
Index myIndex1 = new Index(3, true);  // ^3, третий с конца
Index myIndex2 = new Index(3, false); // элемент по индексу 3
Index myIndex3 = ^3;                  // ^3, третий с конца
int el4 = arr[myIndex1];  // Вернет:  7.
int el5 = arr[myIndex2];  // Вернет: 10.
int el6 = arr[myIndex3];  // Вернет:  7.

// Вывод содержимого индекса
Console.WriteLine($"value: {myIndex1.Value} isFromEnd: {myIndex1.isFromEnd}"); 
```



### Диапазон

Взятие диапазона/среза у существующего массива: сначала указываем начальный элемент, потом конечный элемент массива, при этом конечный не включается.

```c#
int[] arr = {2, 5, 7, 10, 8}; // Инициализация массива на 5 элементов.
int[] arr2 = arr[2..4];   // Вернет: 7, 10
int[] arr3 = arr[3..];    // Вернет: 10, 8
int[] arr4 = arr[..3];    // Вернет: 2, 5, 7
int[] arr5 = arr[^3..^1]; // Вернет: 7, 10
```

Программное создание диапазона:

```c#
Range myRange1 = new Range(new Index(3, true), new Index(1, true));
Range myRange2 = ^3..^1; // неявное преобразование укороченной записи
// Вернет: 7, 10
```



Использование диапазона в строках:

```c#
string str = "Hello World !!! =)";
Console.WriteLine(str[0..6]); Вернет: "Hello ".
```

