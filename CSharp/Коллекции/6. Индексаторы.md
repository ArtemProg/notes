## Обращение к коллекциям как к массивам: индексаторы



Индексаторы позволяют индексировать объекты и обращаться к ним по индексу.

Индексатор выглядит очень похоже на обычное свойство, с тем исключением, что в нем вместо имени свойства появляются ключевое свойство `this` и оператор индекса `[]`.

```c#
MyArray<string> myArray = new MyArray<string>( new string [] { "apple", "pear"} );
Console.WriteLine(myArray[1]);
// ...
class MyArray<T>
{
    public MyArray(T[] array)
    {
        this.array = array;
    }
    private T[] array;
    
	public T this[int index]
    {
        get { return array[index]; }
        set { array[index] = value; }
    }
}
```



Expression Body Definition, доступ на чтение с версии C#6.0:

```c#
class MyArray<T>
{
    private T[] array;
    
    public void Add(T value) {...}
    
	public T this[int index] => array[index];
}
```



Тело в виде выражения начиная с версии C#7.0:

```c#
class MyArray<T>
{
    private T[] array;
    
    public void Add(T value) {...}
    
	public T this[int index]
    {
        get => array[index];
        set => array[index] = value;
    }
}
```



При использовании индексаторов компилятор автоматически создает скрытое свойство `Item`, но имя данного свойства можно переопределить с помощью атрибута (аспекта): `[System.Runtime.CompilerServices.IndexerNameAttribute("TheItem")]`



Общие сведения об индексаторах:

- Индексаторы позволяют индексировать объекты так же, как и массивы.
- Метод доступа get возвращает значение. Метод доступа set назначает значение.
- Ключевое слово this используется для определения индексаторов.
- Ключевое слово value используется для определения значения, присваиваемого методом доступа set.
- Индексаторы не нужно индексировать по целому значению; пользователь может определить конкретный механизм поиска на свое усмотрение.
- Индексаторы могут быть перегружены.
- Индексаторы могут иметь более одного формального параметра, например при доступе к двумерному массиву.