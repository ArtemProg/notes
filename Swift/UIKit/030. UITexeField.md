## UITextField



Позволяет скрыть клавиатуру при на жатии на кнопку возврата:

```swift
func textFieldShouldReturn(_ textField: UITextField) -> Bool {
    textField.resignFirstResponder()
}
```

При завершении редактирования:

```swift
func textFieldDidEndEditing(_ textField: UITextField) {
    //...
}
```

При начале редактирования:

```swift
func textFieldDidBeginEditing(_ textField: UITextField) {
    // Добавление кнопки Done на цифровой клавиатуре
    let keyboardToolBar = UIToolbar()
    keyboardToolBar.sizeToFit()
    textField.inputAccessoryView = keyboardToolBar
    
    let doneButton = UIBarButtonItem(
        barButtonSystemItem: .done,
        target: textField,
        action: #selector(resignFirstResponder)
    )
    
    let flexBarButton = UIBarButtonItem(
        barButtonSystemItem: .flexibleSpace,
        target: nil,
        action: nil
    )
    
    keyboardToolBar.items = [flexBarButton, doneButton]
}
```

Вызывается каждый раз перед внесением изменений:

```swift
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
    
    let currentText = textField.text ?? ""
    let prospectiveText = (currentText as NSString).replacingCharacters(in: range, with: string)

    // Разрешаем только цифры и точку
    let allowedCharacters = "0123456789."
    if string.rangeOfCharacter(from: CharacterSet(charactersIn: allowedCharacters).inverted) != nil {
        return false
    }

    // Только одна точка
    let dotCount = prospectiveText.components(separatedBy: ".").count - 1
    if dotCount > 1 {
        return false
    }

    // Не больше двух знаков после точки
    if let dotIndex = prospectiveText.firstIndex(of: ".") {
        let decimalPart = prospectiveText[prospectiveText.index(after: dotIndex)...]
        if decimalPart.count > 2 {
            return false
        }
    }

    // Значение от 0 до 1
    if let value = Double(prospectiveText), value < 0 || value > 1 {
        return false
    }

    return true
    
}
```

